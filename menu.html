<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MenÃº de Remisiones</title>

<style>
*{box-sizing:border-box}

body{
  font-family:Arial,Helvetica,sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:20px;
}

.container{
  max-width:420px;
  margin:auto;
  background:#fff;
  border-radius:16px;
  padding:22px;
  box-shadow:0 8px 24px rgba(0,0,0,.1);
}

h2{
  text-align:center;
  margin-top:0;
}

.usuario{
  text-align:center;
  font-size:14px;
  color:#666;
  margin-bottom:20px;
}

.btn{
  width:100%;
  padding:16px;
  margin-top:12px;
  border:none;
  border-radius:10px;
  font-size:16px;
  color:#fff;
  cursor:pointer;
}

.btn-nueva{ background:#4ca494 }
.btn-pendientes{ background:#f39c12 }
.btn-terminadas{ background:#3498db }
.btn-salir{ background:#e74c3c }

.btn:active{ opacity:.9 }

.footer{
  text-align:center;
  margin-top:18px;
  font-size:12px;
  color:#999;
}
</style>
</head>

<body>

<script>
/* =========================
   PROTECCIÃ“N DE SESIÃ“N
========================= */
const usuario = JSON.parse(localStorage.getItem("usuario"));
if (!usuario || !usuario.usuario || !usuario.rol) {
  localStorage.clear();
  window.location.href = "index.html";
}
</script>

<div class="container">

  <h2>MenÃº principal</h2>

  <div class="usuario">
    Usuario: <b id="nombreUsuario"></b>
  </div>

  <button class="btn btn-nueva" onclick="nuevaRemision()">
    âž• Nueva remisiÃ³n
  </button>

  <button class="btn btn-pendientes" onclick="verPendientes()">
    ðŸ“‹ Remisiones pendientes
  </button>

  <button class="btn btn-terminadas" onclick="verTerminadas()">
    âœ… Remisiones terminadas
  </button>

  <button class="btn btn-salir" onclick="cerrarSesion()">
    ðŸšª Cerrar sesiÃ³n
  </button>

  <div class="footer">
    Sistema de Remisiones
  </div>

</div>

<script>
/* =========================
   INIT
========================= */
document.getElementById("nombreUsuario").innerText = usuario.usuario;

/* =========================
   ACCIONES
========================= */
function nuevaRemision(){
  // Si hay pendientes, envÃ­a primero ahÃ­
  const pendientes = JSON.parse(localStorage.getItem("pendientes")) || [];
  if(pendientes.length > 0){
    window.location.href = "pendientes.html";
  } else {
    window.location.href = "remision.html";
  }
}

function verPendientes(){
  window.location.href = "pendientes.html";
}

function verTerminadas(){
  window.location.href = "terminadas.html";
}

function cerrarSesion(){
  if(!confirm("Â¿Cerrar sesiÃ³n?")) return;
  localStorage.clear();
  window.location.href = "index.html";
}
</script>

</body>
</html>
